#!/bin/bash

# This file was generated by Ansible for {{ ansible_fqdn }}
# Do NOT modify this file by hand!

WORKDIR={{backup_work}}/{{item.name}}

{% if item.source.startswith('postgresql://') or item.source.startswith('mysql://') or item.source.startswith('mongo://') %}
rm -rf $WORKDIR/dump
{% endif %}

{% for _backup_hook_action in item.post_actions|default([]) %}
{% if _backup_hook_action is defined and _backup_hook_action is iterable and _backup_hook_action is not string %}
{% if _backup_hook_action.type == "command" %}
{{_backup_hook_action.command}}
{% endif %}
{% if _backup_hook_action.type == "email" %}
{{backup_home}}/{{_backup_profile_name}}/email-notification-post-{{_backup_hook_action.name}}
{% endif %}
{% endif %}
{% endfor %}
